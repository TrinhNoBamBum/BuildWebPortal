import{J as F,H as L,ar as E,R as g,j as e,G as a,S as m,aq as j,ai as P,aj as T,T as p,as as f,at as A,au as D,P as q}from"./index-BV4Nease.js";import{E as W,a as $,A as M}from"./EyeInvisibleOutlined-I3y2Xqo2.js";import{a as O}from"./baseaxios-CTVpXELN.js";import{F as R,c as U,a as w}from"./formik.esm-DZjldY3N.js";import{I as b,F as h,B as z}from"./InputLabel-WUsojO3a.js";import{F as G,C as H}from"./FormControlLabel-M6Lp4kHF.js";import{L as V}from"./Link-BKtrec7X.js";const J=async u=>{var o,l,c,r;try{const n=await O.post("http://27.71.228.19:6969/common/login",u);return((o=n.data)==null?void 0:o.status)==200&&(localStorage.setItem("token",(c=(l=n.data)==null?void 0:l.result)==null?void 0:c.accessToken),localStorage.setItem("username",(r=n.data)==null?void 0:r.result.Username),F.success("Đăng nhập thành công")),n.data}catch(n){console.log(n.message)}};function y(){const u=L(),o=E(),[l,c]=g.useState(!1),[r,n]=g.useState(!1),k=()=>{n(!r)},S=s=>{s.preventDefault()},v=async s=>{var i;const t=await J({Username:s.username,Password:s.password});(t==null?void 0:t.status)==200&&(u(D((i=t.result)==null?void 0:i.Username)),o("/"))};return e.jsx(e.Fragment,{children:e.jsx(R,{initialValues:{username:"",password:"",submit:null},validationSchema:U().shape({username:w().max(255).required("Email is required"),password:w().max(255).required("Password is required")}),onSubmit:v,children:({errors:s,handleBlur:t,handleChange:i,handleSubmit:C,isSubmitting:I,touched:d,values:x})=>e.jsx("form",{noValidate:!0,onSubmit:C,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(m,{spacing:1,children:[e.jsx(b,{htmlFor:"email-login",children:"Tên đăng nhập"}),e.jsx(j,{id:"email-login",value:x.username,name:"username",onBlur:t,onChange:i,placeholder:"Enter username",fullWidth:!0,error:!!(d.username&&s.username)})]}),d.username&&s.username&&e.jsx(h,{error:!0,id:"standard-weight-helper-text-email-login",children:s.username})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(m,{spacing:1,children:[e.jsx(b,{htmlFor:"password-login",children:"Mật khẩu"}),e.jsx(j,{fullWidth:!0,error:!!(d.password&&s.password),id:"-password-login",type:r?"text":"password",value:x.password,name:"password",onBlur:t,onChange:i,endAdornment:e.jsx(P,{position:"end",children:e.jsx(T,{"aria-label":"toggle password visibility",onClick:k,onMouseDown:S,edge:"end",color:"secondary",children:r?e.jsx(W,{}):e.jsx($,{})})}),placeholder:"Enter password"})]}),d.password&&s.password&&e.jsx(h,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(a,{item:!0,xs:12,sx:{mt:-1},children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(G,{control:e.jsx(H,{checked:l,onChange:B=>c(B.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(p,{variant:"h6",children:"Lưu thông tin tài khoản"})}),e.jsx(V,{variant:"h6",component:f,color:"text.primary",children:"Quên mật khẩu?"})]})}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(h,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(A,{children:e.jsx(z,{disableElevation:!0,disabled:I,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})})]})})})})}y.propTypes={isDemo:q.bool};function ee(){return e.jsx(M,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(p,{variant:"h3",children:"Đăng nhập"}),e.jsx(p,{component:f,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Bạn chưa có tài khoản?"})]})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(y,{})})]})})}export{ee as default};
