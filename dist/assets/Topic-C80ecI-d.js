import{H as C,I as N,j as e,G as d,B as f,u as w,r as o,J}from"./index-BV4Nease.js";import{O as k,D as z,a as D,b as E,B as X,c as K,R as Q,d as U}from"./BoxCover-D9rhDFlx.js";import{a as b}from"./topic-cYtaDVfy.js";import{F as I,c as H,a as M}from"./formik.esm-DZjldY3N.js";import{a as F,R as Y,S as Z,P as _}from"./StyledDataGrid-FNaFrEdc.js";import{F as P,B as p}from"./InputLabel-WUsojO3a.js";import"./baseaxios-CTVpXELN.js";import"./TextField-BhRWA0TT.js";import"./FormControlLabel-M6Lp4kHF.js";import"./Skeleton-KZcenIcW.js";function ee({open:s,setOpen:i}){const r=C(),n=N(a=>a.organizationReducer),l=async a=>{(await b.AddTopic({TopicName:a.TopicName})).status==200&&(r(F.status(!n.isFresh)),i(!1))},m=()=>{i(!1)};return e.jsx(e.Fragment,{children:e.jsx(I,{initialValues:{TopicName:"",submit:null},validationSchema:H().shape({TopicName:M().max(255).required("TopicName is required")}),onSubmit:l,children:({errors:a,handleBlur:h,handleChange:u,handleSubmit:g,isSubmitting:x,touched:j,values:T})=>e.jsx("form",{noValidate:!0,onSubmit:g,children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(k,{id:"topic",lable:"Tên chủ đề",values:T,placeholder:"Nhập tên chủ đề truyền thông",nameValue:"TopicName",handleBlur:h,handleChange:u,touched:j,errors:a}),e.jsx(d,{item:!0,xs:12,sx:{mt:-1}}),a.submit&&e.jsx(d,{item:!0,xs:12,children:e.jsx(P,{error:!0,children:a.submit})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(f,{style:{float:"right"},children:[e.jsx(p,{disableElevation:!0,disabled:x,size:"small",variant:"contained",color:"primary",onClick:m,children:"Cancel"}),e.jsx(p,{disableElevation:!0,disabled:x,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function te({open:s,setOpen:i}){const r=w(),n=()=>{i(!1)};return e.jsx(o.Fragment,{children:e.jsxs(z,{open:s,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${r.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(D,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Thêm chủ đề truyền thông"}),e.jsx(E,{children:e.jsx(ee,{open:s,setOpen:i})})]})})}function ae({setOpenEdit:s,topic:i}){const r=C(),n=N(a=>a.organizationReducer),l=async a=>{(await b.EditTopic({TopicName:a.TopicName},i.id)).status==200&&(r(F.status(!n.isFresh)),s(!1))},m=()=>{s(!1)};return e.jsx(e.Fragment,{children:e.jsx(I,{initialValues:{TopicName:i==null?void 0:i.TopicName,submit:null},validationSchema:H().shape({TopicName:M().max(255).required("TopicName is required")}),onSubmit:l,children:({errors:a,handleBlur:h,handleChange:u,handleSubmit:g,isSubmitting:x,touched:j,values:T})=>e.jsx("form",{noValidate:!0,onSubmit:g,children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(k,{id:"topic",lable:"Tên chủ đề",values:T,placeholder:"Nhập tên chủ đề truyền thông",nameValue:"TopicName",handleBlur:h,handleChange:u,touched:j,errors:a}),e.jsx(d,{item:!0,xs:12,sx:{mt:-1}}),a.submit&&e.jsx(d,{item:!0,xs:12,children:e.jsx(P,{error:!0,children:a.submit})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(f,{style:{float:"right"},children:[e.jsx(p,{disableElevation:!0,disabled:x,size:"small",variant:"contained",color:"primary",onClick:m,children:"Cancel"}),e.jsx(p,{disableElevation:!0,disabled:x,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function ie({openEdit:s,setOpenEdit:i,topic:r}){const n=w(),l=()=>{i(!1)};return e.jsx(o.Fragment,{children:e.jsxs(z,{open:s,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${n.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(D,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Sửa thông tin chủ đề truyền thông"}),e.jsx(E,{children:e.jsx(ae,{setOpenEdit:i,topic:r})})]})})}function se(){const[s,i]=o.useState(!1),r=C(),n=N(t=>t.organizationReducer),[l,m]=o.useState([]),[a,h]=o.useState({}),u=async(t,c)=>{const y=await b.getTopic({page:t,size:c});m(y.result.rows)};o.useEffect(()=>{u(0,10)},[n.isFresh]);const[g,x]=o.useState(1),[j,T]=o.useState(10),[v,V]=o.useState([]),A=async()=>{var t;(t=v[0])!=null&&t.id?(await b.DeleteTopic(v[0].id)).status==200&&r(F.status(!n.isFresh)):J.error("Chọn chủ đề để xóa!")},L=t=>{h(t),i(!s)},S=l==null?void 0:l.map((t,c)=>({STT:(g-1)*j+c+1,TopicName:t==null?void 0:t.TopicName,id:t==null?void 0:t.id})),$=[{field:"STT",headerName:"STT",flex:.5},{field:"id",headerName:"Id",flex:1},{field:"TopicName",headerName:"Tên chủ đề",flex:1},{field:"action",align:"left",headerName:"Chỉnh sửa thông tin",flex:.5,renderCell:t=>e.jsx(e.Fragment,{children:e.jsx(U,{type:"edit",onClick:()=>L(t.row)})})}],q=(t,c)=>{x(c),u(c-1,10)},[B,R]=o.useState(!1),G=()=>{R(!B)},O=w();return e.jsxs(X,{children:[e.jsxs(K,{children:[e.jsx(f,{}),e.jsxs(f,{children:[e.jsx(p,{component:"label",onClick:G,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Q,{}),children:"Thêm chủ đề"}),e.jsx(p,{component:"label",onClick:A,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px",marginLeft:"5px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Y,{}),children:"Xóa"})]})]}),S?e.jsx(Z,{rows:S,columns:$,disableColumnMenu:!0,checkboxSelection:!0,rowHeight:40,columnHeaderHeight:45,autoHeight:!0,sx:{border:2,borderColor:O.palette.secondary.light},onRowSelectionModelChange:t=>{const c=new Set(t),y=S.filter(W=>c.has(W.id.toString()));V(y)}}):"Loading",e.jsx(f,{sx:{display:"flex",justifyContent:"center",marginTop:"10px",paddingBottom:"10px"},children:e.jsx(_,{count:10,color:"primary",onChange:q})}),e.jsx(ie,{openEdit:s,setOpenEdit:i,topic:a}),e.jsx(te,{open:B,setOpen:R})]})}const ge=()=>e.jsx(e.Fragment,{children:e.jsx(se,{})});export{ge as default};
