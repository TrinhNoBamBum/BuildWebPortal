import{N as se,j as e,s as G,O as ne,_ as S,r as a,g as ae,b as le,Q as q,i as Te,d as Pe,e as ie,U as De,f as ce,h as ue,V as Le,W as Me,X as $e,K as O,H,I as Q,G as u,S as B,B as k,u as M,T as de,J as Ue}from"./index-BV4Nease.js";import{O as z,D as xe,a as he,b as pe,B as qe,c as Ee,R as Ge,d as K}from"./BoxCover-D9rhDFlx.js";import{a as L}from"./newC1-BXl-CM4u.js";import{a as Y,R as Ve,S as Be,P as Oe}from"./StyledDataGrid-FNaFrEdc.js";import{A as P}from"./AutocompleteForm-DM2Ck111.js";import{F as Ce,c as fe,a as w}from"./formik.esm-DZjldY3N.js";import{C as ge}from"./ComDatePicker-DkX5OOTG.js";import{F as me,B as D,I as He}from"./InputLabel-WUsojO3a.js";import{F as Qe}from"./FormGroup-D72YIyng.js";import{S as Ye,F as J}from"./FormControlLabel-M6Lp4kHF.js";import{a as _e}from"./organization-TJxYY1sJ.js";import{a as We}from"./categoryC1-tV4vV_qs.js";import{a as Xe}from"./authornew-DInW004M.js";import"./baseaxios-CTVpXELN.js";import"./TextField-BhRWA0TT.js";import"./Skeleton-KZcenIcW.js";const Ke=se(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Je=se(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Ze=G("span",{shouldForwardProp:ne})({position:"relative",display:"flex"}),et=G(Ke)({transform:"scale(1)"}),tt=G(Je)(({theme:t,ownerState:r})=>S({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function je(t){const{checked:r=!1,classes:n={},fontSize:c}=t,s=S({},t,{checked:r});return e.jsxs(Ze,{className:n.root,ownerState:s,children:[e.jsx(et,{fontSize:c,className:n.background,ownerState:s}),e.jsx(tt,{fontSize:c,className:n.dot,ownerState:s})]})}const be=a.createContext(void 0);function ot(){return a.useContext(be)}function rt(t){return le("MuiRadio",t)}const Z=ae("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),st=["checked","checkedIcon","color","icon","name","onChange","size","className"],nt=t=>{const{classes:r,color:n,size:c}=t,s={root:["root",`color${q(n)}`,c!=="medium"&&`size${q(c)}`]};return S({},r,ue(s,rt,r))},at=G(Ye,{shouldForwardProp:t=>ne(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:n}=t;return[r.root,n.size!=="medium"&&r[`size${q(n.size)}`],r[`color${q(n.color)}`]]}})(({theme:t,ownerState:r})=>S({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${r.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Te(r.color==="default"?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${Z.checked}`]:{color:(t.vars||t).palette[r.color].main}},{[`&.${Z.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function lt(t,r){return typeof r=="object"&&r!==null?t===r:String(t)===String(r)}const ee=e.jsx(je,{checked:!0}),te=e.jsx(je,{}),oe=a.forwardRef(function(r,n){var c,s;const f=Pe({props:r,name:"MuiRadio"}),{checked:m,checkedIcon:y=ee,color:A="primary",icon:I=te,name:v,onChange:N,size:l="medium",className:j}=f,g=ie(f,st),i=S({},f,{color:A,size:l}),C=nt(i),d=ot();let x=m;const F=De(N,d&&d.onChange);let b=v;return d&&(typeof x>"u"&&(x=lt(d.value,f.value)),typeof b>"u"&&(b=d.name)),e.jsx(at,S({type:"radio",icon:a.cloneElement(I,{fontSize:(c=te.props.fontSize)!=null?c:l}),checkedIcon:a.cloneElement(y,{fontSize:(s=ee.props.fontSize)!=null?s:l}),ownerState:i,classes:C,name:b,checked:x,onChange:F,ref:n,className:ce(C.root,j)},g))});function it(t){return le("MuiRadioGroup",t)}ae("MuiRadioGroup",["root","row","error"]);const ct=["actions","children","className","defaultValue","name","onChange","value"],ut=t=>{const{classes:r,row:n,error:c}=t;return ue({root:["root",n&&"row",c&&"error"]},it,r)},dt=a.forwardRef(function(r,n){const{actions:c,children:s,className:f,defaultValue:m,name:y,onChange:A,value:I}=r,v=ie(r,ct),N=a.useRef(null),l=ut(r),[j,g]=Le({controlled:I,default:m,name:"RadioGroup"});a.useImperativeHandle(c,()=>({focus:()=>{let x=N.current.querySelector("input:not(:disabled):checked");x||(x=N.current.querySelector("input:not(:disabled)")),x&&x.focus()}}),[]);const i=Me(n,N),C=$e(y),d=a.useMemo(()=>({name:C,onChange(x){g(x.target.value),A&&A(x,x.target.value)},value:j}),[C,A,g,j]);return e.jsx(be.Provider,{value:d,children:e.jsx(Qe,S({role:"radiogroup",ref:i,className:ce(l.root,f)},v,{children:s}))})});var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},ht=function(r,n){return a.createElement(O,S({},r,{ref:n,icon:xt}))},ye=a.forwardRef(ht),pt={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Ct=function(r,n){return a.createElement(O,S({},r,{ref:n,icon:pt}))},Ae=a.forwardRef(Ct),ft={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},gt=function(r,n){return a.createElement(O,S({},r,{ref:n,icon:ft}))},mt=a.forwardRef(gt);function jt({open:t,setOpen:r,authors:n,organizations:c,categoriesC1:s}){const f=H(),m=Q(l=>l.organizationReducer),[y,A]=a.useState(null),I=l=>{A(l.format("YYYY-MM-DD"))},v=async l=>{console.log(l),(await L.AddNewC1({Author:"Đang xảy ra lỗi ở đây",ArticleCode:l.ArticleCode,ArticleName:l.ArticleName,ContentCorrector:l.ContentCorrector,AuthorPosition:l.AuthorPosition,UnitId:l.UnitId,CategoryId:l.CategoryId,AuthorId:l.AuthorId,CreateTime:y})).status==200&&(f(Y.status(!m.isFresh)),r(!1))},N=()=>{r(!1)};return e.jsx(e.Fragment,{children:e.jsx(Ce,{initialValues:{ArticleCode:"",ArticleName:"",ContentCorrector:"",AuthorPosition:"",UnitId:"",CategoryId:"",AuthorId:"",submit:null},validationSchema:fe().shape({ArticleCode:w().max(255).required("ArticleCode is required"),UnitId:w().max(255).required("UnitId is required"),ArticleName:w().max(255).required("ArticleName is required"),ContentCorrector:w().max(255).required("ContentCorrector is required"),AuthorPosition:w().max(255).required("AuthorPosition is required")}),onSubmit:v,children:({errors:l,handleBlur:j,handleChange:g,handleSubmit:i,isSubmitting:C,touched:d,values:x})=>e.jsx("form",{noValidate:!0,onSubmit:i,children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(B,{spacing:1,children:e.jsx(ge,{lable:"Ngày tạo tin",length:"100%",onDateChange:I})})}),e.jsx(z,{id:"ArticleCode",lable:"Mã bài báo",values:x,placeholder:"Nhập mã",nameValue:"ArticleCode",handleBlur:j,handleChange:g,touched:d,errors:l}),e.jsx(z,{id:"ArticleName",lable:"Tên bài báo",values:x,placeholder:"Nhập tên",nameValue:"ArticleName",handleBlur:j,handleChange:g,touched:d,errors:l}),e.jsx(z,{id:"ContentCorrector",lable:"Người kiểm duyệt",values:x,placeholder:"Nhập tên người kiểm duyệt",nameValue:"ContentCorrector",handleBlur:j,handleChange:g,touched:d,errors:l}),e.jsx(z,{id:"AuthorPosition",lable:"Chức vụ tác giả",values:x,placeholder:"Nhập chức vụ",nameValue:"AuthorPosition",handleBlur:j,handleChange:g,touched:d,errors:l}),e.jsx(P,{touched:d,data:c,handleBlur:j,errors:l,values:x,handleChange:g,inputLable:"Đơn vị",valueId:"UnitId",valueLable:"UnitFullName"}),e.jsx(P,{touched:d,data:s,handleBlur:j,errors:l,values:x,handleChange:g,inputLable:"Danh mục đăng tin C1",valueId:"CategoryId",valueLable:"CategoryName"}),e.jsx(P,{touched:d,data:n,handleBlur:j,errors:l,values:x,handleChange:g,inputLable:"Tác giả",valueId:"AuthorId",valueLable:"AuthorName"}),e.jsx(u,{item:!0,xs:12,sx:{mt:-1}}),l.submit&&e.jsx(u,{item:!0,xs:12,children:e.jsx(me,{error:!0,children:l.submit})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(k,{style:{float:"right"},children:[e.jsx(D,{disableElevation:!0,disabled:C,size:"small",variant:"contained",color:"primary",onClick:N,children:"Cancel"}),e.jsx(D,{disableElevation:!0,disabled:C,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function bt({open:t,setOpen:r,authors:n,organizations:c,categoriesC1:s}){const f=M(),m=()=>{r(!1)};return e.jsx(a.Fragment,{children:e.jsxs(xe,{open:t,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${f.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(he,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Thêm tin C1"}),e.jsx(pe,{children:e.jsx(jt,{open:t,setOpen:r,authors:n,organizations:c,categoriesC1:s})})]})})}const re={TRUE:!0,FALSE:!1};function yt({lable:t,onRadioChange:r,defaulValue:n}){const[c,s]=a.useState(n==!0||n==!1?n:null),f=m=>{s(m.target.value),r&&r(m.target.value),console.log("Selected Value:",m.target.value)};return e.jsxs(k,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(He,{sx:{marginRight:"30px"},children:[t," :"]}),e.jsxs(dt,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:c,onChange:f,children:[e.jsx(J,{value:re.TRUE,control:e.jsx(oe,{}),label:"True"}),e.jsx(J,{value:re.FALSE,control:e.jsx(oe,{}),label:"False"})]})]})}function At({setOpenEdit:t,authors:r,organizations:n,categoriesC1:c,newC1:s}){const f=H(),m=Q(i=>i.organizationReducer),[y,A]=a.useState(null),[I,v]=a.useState(null),N=i=>{A(i)},l=i=>{v(i.format("YYYY-MM-DD"))},j=async i=>{(await L.EditNewC1({ArticleCode:i.ArticleCode,ArticleName:i.ArticleName,ContentCorrector:i.ContentCorrector,AuthorPosition:i.AuthorPosition,UnitId:i.UnitId,CategoryId:i.CategoryId,AuthorId:i.AuthorId,GoodQuality:y??s.GoodQuality,CreateTime:I||(s==null?void 0:s.CreateTime),Author:"Xảy ra lỗi ở đây"},s.id)).status==200&&(f(Y.status(!m.isFresh)),t(!1))},g=()=>{t(!1)};return e.jsx(e.Fragment,{children:e.jsx(Ce,{initialValues:{ArticleCode:s.ArticleCode,ArticleName:s.ArticleName,ContentCorrector:s.ContentCorrector,AuthorPosition:s.AuthorPosition,UnitId:s.UnitId,CategoryId:s.CategoryId,AuthorId:s.AuthorId,submit:null},validationSchema:fe().shape({ArticleCode:w().max(255).required("ArticleCode is required"),ArticleName:w().max(255).required("ArticleName is required"),ContentCorrector:w().max(255).required("ContentCorrector is required"),AuthorPosition:w().max(255).required("AuthorPosition is required")}),onSubmit:j,children:({errors:i,handleBlur:C,handleChange:d,handleSubmit:x,isSubmitting:F,touched:b,values:R})=>e.jsx("form",{noValidate:!0,onSubmit:x,children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(B,{spacing:1,children:e.jsx(ge,{lable:"Ngày tạo tin",length:"100%",onDateChange:l,valueDefault:s==null?void 0:s.CreateTime})})}),e.jsx(z,{id:"ArticleCode",lable:"Mã bài báo",values:R,placeholder:"Nhập mã",nameValue:"ArticleCode",handleBlur:C,handleChange:d,touched:b,errors:i}),e.jsx(z,{id:"ArticleName",lable:"Tên bài báo",values:R,placeholder:"Nhập tên",nameValue:"ArticleName",handleBlur:C,handleChange:d,touched:b,errors:i}),e.jsx(z,{id:"ContentCorrector",lable:"Người kiểm duyệt",values:R,placeholder:"Nhập tên người kiểm duyệt",nameValue:"ContentCorrector",handleBlur:C,handleChange:d,touched:b,errors:i}),e.jsx(z,{id:"AuthorPosition",lable:"Chức vụ tác giả",values:R,placeholder:"Nhập chức vụ",nameValue:"AuthorPosition",handleBlur:C,handleChange:d,touched:b,errors:i}),e.jsx(P,{touched:b,data:n,handleBlur:C,errors:i,values:R,handleChange:d,inputLable:"Đơn vị",valueId:"UnitId",valueLable:"UnitFullName"}),e.jsx(P,{touched:b,data:c,handleBlur:C,errors:i,values:R,handleChange:d,inputLable:"Danh mục đăng tin C1",valueId:"CategoryId",valueLable:"CategoryName"}),e.jsx(P,{touched:b,data:r,handleBlur:C,errors:i,values:R,handleChange:d,inputLable:"Tác giả",valueId:"AuthorId",valueLable:"AuthorName"}),e.jsx(u,{item:!0,xs:12,children:e.jsx(B,{spacing:1,children:e.jsx(yt,{lable:"GoodQuality",onRadioChange:N,defaulValue:s.GoodQuality})})}),e.jsx(u,{item:!0,xs:12,sx:{mt:-1}}),i.submit&&e.jsx(u,{item:!0,xs:12,children:e.jsx(me,{error:!0,children:i.submit})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(k,{style:{float:"right"},children:[e.jsx(D,{disableElevation:!0,disabled:F,size:"small",variant:"contained",color:"primary",onClick:g,children:"Cancel"}),e.jsx(D,{disableElevation:!0,disabled:F,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function Nt({openEdit:t,setOpenEdit:r,authors:n,organizations:c,categoriesC1:s,newC1:f}){const m=M(),y=()=>{r(!1)};return e.jsx(a.Fragment,{children:e.jsxs(xe,{open:t,onClose:y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${m.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(he,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Cập nhật tin C1"}),e.jsx(pe,{children:e.jsx(At,{setOpenEdit:r,authors:n,organizations:c,categoriesC1:s,newC1:f})})]})})}const h=({count:t,lable:r,status:n})=>e.jsx(e.Fragment,{children:e.jsx(u,{xs:t,item:!0,children:e.jsx(de,{variant:"body2",sx:{fontWeight:n?"bold":"",wordWrap:"break-word",whiteSpace:"normal"},gutterBottom:!0,children:r})})}),E=({quality:t})=>{const r=M();return e.jsx(e.Fragment,{children:t?e.jsx("span",{style:{padding:"2px 6px 2px 6px",background:`${r.palette.success.main}`,fontSize:"12px",borderRadius:"5px",color:"#fff"},children:"Tốt"}):e.jsx("span",{style:{padding:"2px 6px 2px 6px",background:`${r.palette.primary.main}`,fontSize:"12px",borderRadius:"5px",color:"#fff"},children:"Khá"})})},It=({data:t})=>{var r,n,c,s;return e.jsxs(e.Fragment,{children:[e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Code :",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.ArticleCode,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Name :",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.ArticleName,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Phê duyệt :",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.ContentCorrector,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Royalty :",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.Royalty,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Chất lượng :",count:4,status:!0}),e.jsx(h,{lable:(t==null?void 0:t.GoodQuality)==!0?e.jsx(E,{quality:!0}):e.jsx(E,{quality:!1}),count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Đăng tin C2 :",count:4,status:!0}),e.jsx(h,{lable:(t==null?void 0:t.ApproveC2)==!0?e.jsx(ye,{style:{fontSize:"18px",color:"#52c41a"}}):e.jsx(Ae,{style:{fontSize:"18px",color:"#f5222d"}}),count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Chức vụ :",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.AuthorPosition,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Tác giả:",count:4,status:!0}),e.jsx(h,{lable:(r=t==null?void 0:t.Author)==null?void 0:r.AuthorName,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Liên hệ:",count:4,status:!0}),e.jsx(h,{lable:t==null?void 0:t.AuthorPhoneNumber,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Đơn vị :",count:4,status:!0}),e.jsx(h,{lable:(n=t==null?void 0:t.Unit)==null?void 0:n.UnitFullName,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Danh mục :",count:4,status:!0}),e.jsx(h,{lable:(c=t==null?void 0:t.Category)==null?void 0:c.CategoryName,count:8,status:!1})]}),e.jsxs(u,{container:!0,sx:{p:"1px"},children:[e.jsx(h,{lable:"Người biên tập :",count:4,status:!0}),e.jsx(h,{lable:(s=t==null?void 0:t.Author)==null?void 0:s.AuthorName,count:8,status:!1})]})]})},U=({check:t})=>{const r=M();return e.jsx(e.Fragment,{children:t?e.jsx(ye,{style:{fontSize:"15px",color:`${r.palette.success.main}`}}):e.jsx(Ae,{style:{fontSize:"15px",color:`${r.palette.error.main}`}})})},vt=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t);function St(){const[t,r]=a.useState(!1),n=H(),c=Q(o=>o.organizationReducer),[s,f]=a.useState([]),[m,y]=a.useState({}),[A,I]=a.useState([]),[v,N]=a.useState([]),[l,j]=a.useState([]),[g,i]=a.useState(0),[C,d]=a.useState({}),x=async(o,p)=>{const T=await L.getNewC1({page:o,size:p});f(T.result.rows)};a.useEffect(()=>{x(0,10)},[c.isFresh]),a.useEffect(()=>{(async()=>{const p=await Xe.getAuthorNew({size:1e3});I(p.result.rows)})()},[]),a.useEffect(()=>{(async()=>{const p=await _e.getOrganizations({size:100});N(p.result.rows),console.log(p.result.rows)})()},[]),a.useEffect(()=>{(async()=>{const p=await We.getCategoryC1({size:100});j(p.result.rows),console.log(p.result.rows)})()},[]);const[F,b]=a.useState(1),[R,Rt]=a.useState(10),[_,Ne]=a.useState([]),Ie=async()=>{var o,p;(o=_[0])!=null&&o.id?(await L.DeleteNewC1((p=_[0])==null?void 0:p.id)).status==200&&n(Y.status(!c.isFresh)):Ue.error("Chọn kênh để xóa!")},ve=o=>{y(o),r(!t)},Se=o=>{i(4),(async()=>{const T=await L.getDetailC1(o.id);d(T.result)})()},Re=()=>{i(0)},V=s==null?void 0:s.map((o,p)=>({STT:(F-1)*R+p+1,ArticleCode:o==null?void 0:o.ArticleCode,ArticleName:o==null?void 0:o.ArticleName,ContentCorrector:o==null?void 0:o.ContentCorrector,MainCorrector:o==null?void 0:o.MainCorrector,Royalty:vt(o==null?void 0:o.Royalty),ConvertTeachingTime:o.ConvertTeachingTime,GoodQuality:o==null?void 0:o.GoodQuality,ApproveC2:o==null?void 0:o.ApproveC2,AuthorPosition:o==null?void 0:o.AuthorPosition,CollectorId:o==null?void 0:o.CollectorId,UnitId:o==null?void 0:o.UnitId,CategoryId:o==null?void 0:o.CategoryId,CreateTime:o==null?void 0:o.CreateTime,AuthorPhoneNumber:o==null?void 0:o.AuthorPhoneNumber,AuthorId:o==null?void 0:o.AuthorId,id:o==null?void 0:o.id})),ke=[{field:"STT",headerName:"STT",flex:.2},{field:"ArticleCode",headerName:"Mã tin",flex:1},{field:"ArticleName",headerName:"Tên tin",flex:1},{field:"ContentCorrector",headerName:"Người duyệt",flex:1},{field:"MainCorrector",headerName:"MainCorrector",flex:1},{field:"Royalty",headerName:"Nhuận bút",flex:1},{field:"ConvertTeachingTime",headerName:"Quy đổi giờ giảng",flex:1,renderCell:o=>o.value?e.jsx(U,{check:!0}):e.jsx(U,{check:!1})},{field:"GoodQuality",headerName:"Chất lượng",flex:1,renderCell:o=>o.value?e.jsx(E,{quality:!0}):e.jsx(E,{quality:!1})},{field:"ApproveC2",headerName:"Đăng trên C2",flex:1,renderCell:o=>o.value?e.jsx(U,{check:!0}):e.jsx(U,{check:!1})},{field:"AuthorPosition",headerName:"Chức danh ",flex:1},{field:"AuthorPhoneNumber",headerName:"Liên hệ",flex:1},{field:"CreateTime",headerName:"CreateTime",flex:1},{field:"action",align:"left",headerName:"Tác vụ",flex:1.4,renderCell:o=>e.jsxs(e.Fragment,{children:[e.jsx(K,{type:"seen",onClick:()=>Se(o.row)}),e.jsx(K,{type:"edit",onClick:()=>ve(o.row)})]})}],we=(o,p)=>{b(p),x(p-1,10)},[W,X]=a.useState(!1),ze=()=>{X(!W)},$=M();return e.jsx(qe,{children:e.jsxs(u,{container:!0,children:[e.jsxs(u,{xs:12-g,item:!0,children:[e.jsxs(Ee,{children:[e.jsx(k,{}),e.jsxs(k,{children:[e.jsx(D,{component:"label",onClick:ze,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Ge,{}),children:"Thêm tin"}),e.jsx(D,{component:"label",onClick:Ie,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px",marginLeft:"5px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Ve,{}),children:"Xóa"})]})]}),V?e.jsx(Be,{rows:V,columns:ke,disableColumnMenu:!0,checkboxSelection:!0,autoHeight:!0,rowHeight:40,columnHeaderHeight:45,sx:{border:2,borderColor:$.palette.secondary.light},onRowSelectionModelChange:o=>{const p=new Set(o),T=V.filter(Fe=>p.has(Fe.id.toString()));Ne(T)}}):"Loading",e.jsx(k,{sx:{display:"flex",justifyContent:"center",marginTop:"10px",paddingBottom:"10px"},children:e.jsx(Oe,{count:10,color:"primary",onChange:we})}),e.jsx(Nt,{openEdit:t,setOpenEdit:r,authors:A,organizations:v,categoriesC1:l,newC1:m}),e.jsx(bt,{open:W,setOpen:X,authors:A,organizations:v,categoriesC1:l})]}),g==4?e.jsx(u,{xs:g,sx:{p:1},item:!0,children:e.jsxs(k,{sx:{width:"100%",height:"92%",border:`1px solid ${$.palette.secondary.main} `,maxHeight:"95%"},children:[e.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",textAlign:"center",borderBottom:`1px solid ${$.palette.secondary.main}`,p:"4px",background:`${$.palette.primary.lighter}`},children:[e.jsx(de,{variant:"h5",children:"Thông tin chi tiết"}),e.jsx(mt,{onClick:Re,sx:{float:"right"}})]}),e.jsx(k,{children:e.jsx(It,{data:C})})]})}):e.jsx(e.Fragment,{})]})})}const Ht=()=>e.jsx(e.Fragment,{children:e.jsx(St,{})});export{Ht as default};
