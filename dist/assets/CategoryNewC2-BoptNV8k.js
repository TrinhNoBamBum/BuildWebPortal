import{H as N,I as w,j as e,G as c,B as j,u as F,r,J}from"./index-BV4Nease.js";import{O as R,D as k,a as z,b as E,B as X,c as K,R as Q,d as U}from"./BoxCover-D9rhDFlx.js";import{a as v,R as Y,S as Z,P as _}from"./StyledDataGrid-FNaFrEdc.js";import{a as f}from"./categoryC2-SXxx1T7y.js";import"./baseaxios-CTVpXELN.js";import{F as I,c as H,a as M}from"./formik.esm-DZjldY3N.js";import{F as P,B as u}from"./InputLabel-WUsojO3a.js";import"./TextField-BhRWA0TT.js";import"./FormControlLabel-M6Lp4kHF.js";import"./Skeleton-KZcenIcW.js";function ee({open:n,setOpen:s}){const o=N(),i=w(a=>a.organizationReducer),l=async a=>{(await f.AddCategoryC2({CategoryName:a.CategoryName})).status==200&&(o(v.status(!i.isFresh)),s(!1))},g=()=>{s(!1)};return e.jsx(e.Fragment,{children:e.jsx(I,{initialValues:{CategoryName:"",submit:null},validationSchema:H().shape({CategoryName:M().max(255).required("CategoryName is required")}),onSubmit:l,children:({errors:a,handleBlur:h,handleChange:x,handleSubmit:p,isSubmitting:m,touched:C,values:y})=>e.jsx("form",{noValidate:!0,onSubmit:p,children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(R,{id:"CategoryName",lable:"Danh mục",values:y,placeholder:"Nhập danh mục tin C2",nameValue:"CategoryName",handleBlur:h,handleChange:x,touched:C,errors:a}),e.jsx(c,{item:!0,xs:12,sx:{mt:-1}}),a.submit&&e.jsx(c,{item:!0,xs:12,children:e.jsx(P,{error:!0,children:a.submit})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{style:{float:"right"},children:[e.jsx(u,{disableElevation:!0,disabled:m,size:"small",variant:"contained",color:"primary",onClick:g,children:"Cancel"}),e.jsx(u,{disableElevation:!0,disabled:m,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function te({open:n,setOpen:s}){const o=F(),i=()=>{s(!1)};return e.jsx(r.Fragment,{children:e.jsxs(k,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${o.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(z,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Thêm danh mục tin C2 "}),e.jsx(E,{children:e.jsx(ee,{open:n,setOpen:s})})]})})}function ae({setOpenEdit:n,categoryC2:s}){const o=N(),i=w(a=>a.organizationReducer),l=async a=>{(await f.EditCategoryC2({CategoryName:a.CategoryName},s.id)).status==200&&(o(v.status(!i.isFresh)),n(!1))},g=()=>{n(!1)};return e.jsx(e.Fragment,{children:e.jsx(I,{initialValues:{CategoryName:s==null?void 0:s.CategoryName,submit:null},validationSchema:H().shape({CategoryName:M().max(255).required("CategoryName is required")}),onSubmit:l,children:({errors:a,handleBlur:h,handleChange:x,handleSubmit:p,isSubmitting:m,touched:C,values:y})=>e.jsx("form",{noValidate:!0,onSubmit:p,children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(R,{id:"CategoryName",lable:"Danh mục",values:y,placeholder:"Nhập danh mục tin C2",nameValue:"CategoryName",handleBlur:h,handleChange:x,touched:C,errors:a}),e.jsx(c,{item:!0,xs:12,sx:{mt:-1}}),a.submit&&e.jsx(c,{item:!0,xs:12,children:e.jsx(P,{error:!0,children:a.submit})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{style:{float:"right"},children:[e.jsx(u,{disableElevation:!0,disabled:m,size:"small",variant:"contained",color:"primary",onClick:g,children:"Cancel"}),e.jsx(u,{disableElevation:!0,disabled:m,size:"small",type:"submit",variant:"contained",color:"primary",sx:{marginLeft:"10px"},children:"Ok"})]})})]})})})})}function se({openEdit:n,setOpenEdit:s,categoryC2:o}){const i=F(),l=()=>{s(!1)};return e.jsx(r.Fragment,{children:e.jsxs(k,{open:n,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialogTitle-root":{background:`${i.palette.secondary[200]}`,marginBottom:"5px"}},children:[e.jsx(z,{id:"alert-dialog-title",sx:{fontSize:"16px",fontWeight:"Bold",lineHeight:"24px"},children:"Cập nhật danh mục tin C2"}),e.jsx(E,{children:e.jsx(ae,{setOpenEdit:s,categoryC2:o})})]})})}function ne(){const[n,s]=r.useState(!1),o=N(),i=w(t=>t.organizationReducer),[l,g]=r.useState([]),[a,h]=r.useState({}),x=async(t,d)=>{const S=await f.getCategoryC2({page:t,size:d});g(S.result.rows)};r.useEffect(()=>{x(0,10)},[i.isFresh]);const[p,m]=r.useState(1),[C,y]=r.useState(10),[B,V]=r.useState([]),A=async()=>{var t;(t=B[0])!=null&&t.id?(await f.DeleteCategoryC2(B[0].id)).status==200&&o(v.status(!i.isFresh)):J.error("Chọn chủ đề để xóa!")},L=t=>{h(t),s(!n)},b=l==null?void 0:l.map((t,d)=>({STT:(p-1)*C+d+1,CategoryName:t==null?void 0:t.CategoryName,id:t==null?void 0:t.id})),$=[{field:"STT",headerName:"STT",flex:.5},{field:"id",headerName:"Id",flex:1},{field:"CategoryName",headerName:"Danh mục",flex:1},{field:"action",align:"left",headerName:"Chỉnh sửa thông tin",flex:.5,renderCell:t=>e.jsx(e.Fragment,{children:e.jsx(U,{type:"edit",onClick:()=>L(t.row)})})}],q=(t,d)=>{m(d),x(d-1,10)},[D,T]=r.useState(!1),G=()=>{T(!D)},O=F();return e.jsxs(X,{children:[e.jsxs(K,{children:[e.jsx(j,{}),e.jsxs(j,{children:[e.jsx(u,{component:"label",onClick:G,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Q,{}),children:"Thêm danh mục"}),e.jsx(u,{component:"label",onClick:A,sx:{whiteSpace:"nowrap",padding:"5px 15px 5px 15px",marginLeft:"5px"},role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(Y,{}),children:"Xóa"})]})]}),b?e.jsx(Z,{rows:b,columns:$,disableColumnMenu:!0,checkboxSelection:!0,rowHeight:40,columnHeaderHeight:45,autoHeight:!0,sx:{border:2,borderColor:O.palette.secondary.light},onRowSelectionModelChange:t=>{const d=new Set(t),S=b.filter(W=>d.has(W.id.toString()));V(S)}}):"Loading",e.jsx(j,{sx:{display:"flex",justifyContent:"center",marginTop:"10px",paddingBottom:"10px"},children:e.jsx(_,{count:10,color:"primary",onChange:q})}),e.jsx(se,{openEdit:n,setOpenEdit:s,categoryC2:a}),e.jsx(te,{open:D,setOpen:T})]})}const pe=()=>e.jsx(e.Fragment,{children:e.jsx(ne,{})});export{pe as default};
